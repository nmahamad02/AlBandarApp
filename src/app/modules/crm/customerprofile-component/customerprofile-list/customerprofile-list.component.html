<div class="container-fluid">
    <br>
    <div class="col-12">
        <mat-card style="color: darkblue; background-color:rgb(251, 252, 249);">
            <mat-card-header>
                <div class="col-12">
                    <div class="row">
                        <div class="col-4">
                            <mat-card-title>Customer Profile Management </mat-card-title>
                        </div>                
                    </div>
                </div>
            </mat-card-header>        
            <!--  <div class="col-11">
                <b>Search</b>
                <mat-form-field class="full-width">
                    <mat-icon matPrefix>search</mat-icon>
                  <input matInput type="text" style="color: black;" placeholder="Please Enter Your Seach Keyword to filter" (keyup)="quickPartySearch()" [(ngModel)]="searchValue"> 
                </mat-form-field>
            </div>-->
             <mat-tab-group mat-align-tabs="center" >
               <mat-tab label="Home" style="color:wheat;">
                 <div class="row">
                   <b>Search</b>
                   <mat-form-field>
                     <mat-icon matPrefix>search</mat-icon>
                     <input matInput type="text" style="color: black;" placeholder="Please Enter Your Seach Keyword to filter" (keyup)="quickPartyrSearch()" [(ngModel)]="searchValue">
                   </mat-form-field>
                 </div>
                 <!-- GET PARTY DETAILS FOR THIS CUSTOMER-->
                 <button mat-raised-button color="primary" (click)="exporter.exportTable('xlsx')">Export as Excel</button>
                 <div>
                   <br />
                 </div>
                 <mat-table [dataSource]="customerlistDataSource" matTableExporter #exporter="matTableExporter"
                            class="mat-table" matSort matSortDisableClear [multiTemplateDataRows]="true">
                   <ng-container matColumnDef="PCODE">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> Customer ID </mat-header-cell>
                     <mat-cell *matCellDef="let row"> {{ row.PCODE }} </mat-cell>
                   </ng-container>

                   <ng-container matColumnDef="CUST_NAME">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> Name </mat-header-cell>
                     <mat-cell *matCellDef="let row"> {{ row.CUST_NAME }} </mat-cell>
                   </ng-container>

                   <ng-container matColumnDef="ACCOUNT_TYPE_CD">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> TYPE </mat-header-cell>
                     <mat-cell *matCellDef="let row"> {{ row.ACCOUNT_TYPE_CD }} </mat-cell>
                   </ng-container>

                   <ng-container matColumnDef="ADD1">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> ADDRESS I </mat-header-cell>
                     <mat-cell *matCellDef="let row"> {{ row.ADD1 }} </mat-cell>
                   </ng-container>

                   <ng-container matColumnDef="ADD2">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> ADDRESS II </mat-header-cell>
                     <mat-cell *matCellDef="let row"> {{ row.ADD2 }} </mat-cell>
                   </ng-container>

                   <ng-container matColumnDef="MOBILE">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> MOBILE</mat-header-cell>
                     <mat-cell *matCellDef="let row"> {{ row.MOBILE }} </mat-cell>
                   </ng-container>

                   <ng-container matColumnDef="EMAIL_ID">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> EMAIL</mat-header-cell>
                     <mat-cell *matCellDef="let row"> {{ row.EMAIL_ID }} </mat-cell>
                   </ng-container>

                   <ng-container matColumnDef="TAX_1_NO">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> TAX</mat-header-cell>
                     <mat-cell *matCellDef="let row"> {{ row.TAX_1_NO }} </mat-cell>
                   </ng-container>


                   <ng-container matColumnDef="PHONE1">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> PHONE </mat-header-cell>
                     <mat-cell *matCellDef="let row"> {{ row.PHONE1 }} </mat-cell>
                   </ng-container>

                   <!-- Button Column -->
                   <ng-container matColumnDef="Actions">
                     <mat-header-cell *matHeaderCellDef mat-sort-header> Actions </mat-header-cell>
                     <mat-cell *matCellDef="let row">
                       <button md-raised-button color="primary" class="btn-w-md ml-2 bg-primary text-white" style="border-radius: 50%;" (click)="gotoCustomerDetails('/crm/customer/details', row.PCODE)">
                         View
                       </button>
                     </mat-cell>
                   </ng-container>

                   <mat-header-row *matHeaderRowDef="columnCustomer"></mat-header-row>
                   <mat-row matRipple *matRowDef="let row; columns: columnCustomer;"></mat-row>
                 </mat-table>
                 <mat-paginator #paginator
                                [pageSize]="50"
                                [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons>
                 </mat-paginator>
               </mat-tab>
                
                <mat-tab label="Contact Details">
                  
                        <ag-grid-angular style="width: 100%; height: 360px ;" 
                        class="ag-theme-balham" [animateRows]="true"
                        [pagination]="true" [paginationPageSize]="25" 
                        [gridOptions]="gridOptions" 
                        [rowStyle]="rowStyle"
                        [rowData]="CustPartyList"
                        [suppressRowClickSelection]="true"
                        [columnDefs]="columnContactDefs"
                        (gridReady)="onGridCustomerParty($event)"></ag-grid-angular> 
                </mat-tab>

                <mat-tab label="Member Details">

                    <ag-grid-angular style="width: 100%; height: 360px ;" 
                    class="ag-theme-balham" [animateRows]="true"
                    [pagination]="true" [paginationPageSize]="25" 
                    [gridOptions]="gridOptions" 
                    [rowStyle]="rowStyle"
                    [rowData]="CustMemberList"
                    [suppressRowClickSelection]="true"
                    [columnDefs]="columnCustomerMemberDefs"
                    (gridReady)="onGridCustomerMember($event)"></ag-grid-angular> 
                </mat-tab>

               <mat-tab label="Opening Balance"> 
                
                <div *ngIf="opbalChartBool">
                    <button mat-raised-button class="bg-primary text-white btn" (click)="flipChartGrid()">
                        Show data grid
                    </button>
                    <!-- <canvas baseChart 
                        [datasets]="barChartData"
                        [labels]="barChartLabels"
                        [options]="barChartOptions"
                        [colors]="barChartColors"
                        [plugins]="barChartPlugins"
                        [legend]="barChartLegend"
                        [chartType]="barChartType">
                      </canvas> -->
                                        </div>
                                        <div *ngIf="!opbalChartBool">
                                            <button mat-raised-button class="bg-primary text-white btn" (click)="flipChartGrid()">
                                                Show chart
                                            </button>
                   <ag-grid-angular style="width: 100%; height: 360px ;" 
                class="ag-theme-balham" [animateRows]="true"
                [pagination]="true" [paginationPageSize]="25" 
                [gridOptions]="gridOptions" 
                [rowStyle]="rowStyle"
                [rowData]="CustInvoiceList"
                [suppressRowClickSelection]="true"
                (cellClicked)='onViewCellClicked($event)'
                [columnDefs]="columnCustomeropeningDefs"
                (gridReady)="onGridCustomerOpeningDetail($event)"></ag-grid-angular>   
                </div>
               </mat-tab>
               <mat-tab label="Services">Services</mat-tab>

               <mat-tab label="Agreements"><ag-grid-angular style="width: 100%; height: 360px ;" 
                class="ag-theme-balham" [animateRows]="true"
                [pagination]="true" [paginationPageSize]="25" 
                [gridOptions]="gridOptions" 
                [rowStyle]="rowStyle"
                [rowData]="CustAgreementList"
                [suppressRowClickSelection]="true"
                [columnDefs]="columnCustomerAgreementDefs"
                (gridReady)="onGridCustomerAgreement($event)"></ag-grid-angular> </mat-tab>

               <mat-tab label="Invoice"></mat-tab>
               <mat-tab label="Payments"></mat-tab>
               
                             
             </mat-tab-group>
             <br>
        </mat-card>
    </div>
</div>
