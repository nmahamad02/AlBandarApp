<div class="container-fluid">
    <div class="col-12">
        <mat-card style="color: darkblue; background-color:rgb(251, 252, 249);">
            <mat-card-header>
                <div class="col-12">
                    <div class="row">
                        <div class="col-4">
                            <mat-card-title> Invoice</mat-card-title>  
                        </div>
                        <div class="col-7">
                            <mat-card-actions>
                                <div class="row">
                                    <div class="col-2">
                                        <button mat-raised-button class="bg-primary text-white btn btn-block" style="border-radius: 50%;">
                                            <mat-icon>add</mat-icon> New
                                        </button>
                                    </div>
                                    <div class="col-2">
                                        <button mat-raised-button class="bg-warning text-white btn btn-block" style="border-radius: 50%;" [routerLinkActive]="['active']" [routerLink]="['/crm/invoicereport']" (click)="setReportData(invReportApiUrl, invReportName)">
                                            <mat-icon>note_add</mat-icon> View 
                                        </button>
                                    </div>
                                    <div class="col-2">
                                        <button type="submit" mat-raised-button class="bg-secondary text-white btn btn-block" style="border-radius: 50%;" >  
                                            <mat-icon>print</mat-icon> Print
                                        </button>
                                    </div>
                                    <div class="col-2">
                                        <button mat-raised-button class="bg-success  text-white btn btn-block" style="border-radius: 50%;">
                                            <mat-icon>note_add</mat-icon> Submit 
                                        </button>
                                    </div>
                                    <div class="col-2">
                                        <button mat-raised-button class="bg-info text-white btn btn-block" style="border-radius: 50%;">
                                            <mat-icon>Delete</mat-icon> Delete
                                        </button>   
                                    </div>
                                    <div class="col-2">
                                        <button mat-raised-button class="bg-danger text-white btn btn-block" style="border-radius: 50%;">
                                            <mat-icon>cancel</mat-icon> Exit
                                        </button>
                                    </div>  
                                </div>
                            </mat-card-actions>
                        </div>
                    </div>
                </div>
            </mat-card-header> 
            <mat-card-content>
                <div class="col-12">
                    <form [formGroup]="inoviceForm" class="form-container">
                        <div class="form-row">
                            <div class="row">
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width">
                                        <mat-label i18n="@@CMMContactsNameFormControl">Invoice Number</mat-label>
                                        <input formControlName="siIssueRefNo" matInput >
                                        <mat-error i18n="@@CMMContactsNameFormControlError">Invoice Number is <strong>required</strong></mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Aggrement No</mat-label>
                                        <input type="text" formControlName="siIssueDate" matInput>
                                        <mat-error i18n="@@CMMContactsMobileFormControlError">Invoice Date <strong>required</strong></mat-error>
                                    </mat-form-field>
                                </div>
                                
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Invoice Date</mat-label>
                                        <input type="text" formControlName="siIssueDate" matInput>
                                        <mat-error i18n="@@CMMContactsMobileFormControlError">Invoice Date <strong>required</strong></mat-error>
                                    </mat-form-field>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Bill To:</mat-label>
                                        <input matInput 
                                        type="text" 
                                        formControlName="rptAccountDescription" >
                                    </mat-form-field> 
                                </div>
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Customer Type:</mat-label>
                                        <input matInput 
                                        type="text" 
                                        formControlName="rptAccountDescription" >
                                    </mat-form-field> 

                                </div>
                                
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Agreement Master Number:</mat-label>
                                        <input type="text" formControlName="siIssueLocation" matInput>
                                        <mat-error i18n="@@CMMContactsMobileFormControlError">Issue Date <strong>required</strong></mat-error>
                                    </mat-form-field>                             
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Name :</mat-label>
                                        <input type="text" formControlName="invName" matInput>
                                        <mat-error i18n="@@CMMContactsMobileFormControlError">Name <strong>required</strong></mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Contact Name :</mat-label>
                                        <input type="text" formControlName="InvContactName" matInput>
                                        <mat-error i18n="@@CMMContactsMobileFormControlError">Contact Name <strong>required</strong></mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Contact No :</mat-label>
                                        <input type="text" formControlName="invContactNo" matInput>
                                        <mat-error i18n="@@CMMContactsMobileFormControlError">Contact No <strong>required</strong></mat-error>
                                    </mat-form-field>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Billing Address:</mat-label>
                                        <input type="text" formControlName="invBillAdd" matInput>
                                        <mat-error i18n="@@CMMContactsMobileFormControlError">Billing Address <strong>required</strong></mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Email Address:</mat-label>
                                        <input type="text" formControlName="invEmailAdd" matInput>
                                        <mat-error i18n="@@CMMContactsMobileFormControlError">Email Address <strong>required</strong></mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-4" style="padding: 5px;">
                                    <mat-form-field class="full-width"> 
                                        <mat-label i18n="@@CMMContactsMobileFormControl">Telephone :</mat-label>
                                        <input type="text" formControlName="invTelPhono" matInput>
                                        <mat-error i18n="@@CMMContactsMobileFormControlError">Telephone Address <strong>required</strong></mat-error>
                                    </mat-form-field>
                                </div>
                            </div>




                      
                        </div>
                        <div class="form-row">
                            <div class="col-10">
                                <mat-form-field class="full-width"> 
                                    <mat-label i18n="@@CMMContactsMobileFormControl">Subject </mat-label>
                                    <input type="text" formControlName="siIssueNarration" matInput>
                                    <mat-error i18n="@@CMMContactsMobileFormControlError">Subject <strong>required</strong></mat-error>
                                </mat-form-field>
                            </div> 
                        </div>              
                   </form>
                </div>
                <mat-tab-group mat-align-tabs="center" >
                    <mat-tab label="Home" style="color:wheat;">Home
                        <div class="col-11">
                            <b>Search</b>
                            <mat-form-field class="full-width">
                                <mat-icon matPrefix>search</mat-icon>
                                <input matInput type="text" style="color: black;" placeholder="Please Enter Your Seach Keyword to filter" (keyup)="quickInvoiceSearch()" [(ngModel)]="searchValue">
                            </mat-form-field>
                        </div>
                        <!-- GET PARTY DETAILS FOR THIS CUSTOMER-->
                        <ag-grid-angular style="width: 100%; height: 360px ;" 
                            class="ag-theme-balham" [animateRows]="true"
                            [pagination]="true" [paginationPageSize]="25" 
                            [gridOptions]="gridOptions" 
                            [rowStyle]="rowStyle"
                            [suppressRowClickSelection]="true"
                            [columnDefs]="columndef"
                            (gridReady)="onGridCustomerReady($event)">
                        </ag-grid-angular>     
                    </mat-tab>
                    <mat-tab label="invoiceDetial" style="color:wheat;">Inovice Details
                        <div class="col-12" style="height: 45vh; overflow-y: auto;">
                            <table class="table table-sm table-borderless table-hover table-responsive-xxl">
                                <thead>
                                    <tr class="table-reflow" style="background-color: rgb(25, 129, 129); color: white;">
                                        <th style="width: 6%;">P.S.Code</th>
                                        <th style="width: 35;">Product/Service Description</th>
                                        <th style="width: 5%;">Qty</th>
                                        <th style="width: 5%">UoM</th>
                                        <th style="width: 8%">Amt (BD.)</th>
                                        <th style="width: 3%">Disc %</th>
                                        <th style="width: 5%">Disc Amt (BD.)</th>
                                        <th style="width: 8%">Net Amt (BD.)</th>
                                        <th style="width: 5%">VAT Type</th>
                                        <th style="width: 5%">VAT Amt</th>
                                        <th style="width: 8%">Amt (Vat Incl)</th>
                                        <th style="width: 4%">Department</th>
                                        <th style="width: 4%">Agreement/Job</th>
                                        <th style="width: 3%">Cost Center</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let SI of invoiceDetail.controls; let i = index" [formGroupName]="i">
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <textarea class="form-control form-control-sm" type="text" formControlName="level"></textarea>
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>



                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>

                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" type="text" formControlName="level">
                                        </td>
                                        <td>
                                            <button class="btn btn-danger" type="button" (click)="deleteUnit(i)">&#10005;</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <button class="btn btn-success" type="button" (click)="addUnit()">&#43;</button>
                        </div>
                    </mat-tab>
                    <mat-tab label="Financial Distribution" style="color:wheat;">Financial Distribution</mat-tab>
                    <mat-tab label="Log Detials" style="color:wheat;">Log Detials</mat-tab>
                   <!-- 
<mat-tab label="Reports" style="color:wheat;">Reports
                        <div class="col-12">
                            <app-invoicereport [apiUrl]="invReportApiUrl" [reportName]="invReportName"></app-invoicereport >
                        </div>
                    </mat-tab> 
                   --> 
                </mat-tab-group>

                
                <hr>
                <div class="col-12">
                    <form [formGroup]="invoiceFooter" class="form-container">
                        <div class="row">
                            <div class="col-4">
                                <mat-form-field class="full-width">
                                    <mat-label i18n="@@CMMContactsNameFormControl">Issued By</mat-label>
                                    <input formControlName="siIssueIssuedBy" matInput>
                                    <mat-error i18n="@@CMMContactsNameFormControlError">Prepared By<strong>required</strong></mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-4">
                                <mat-form-field class="full-width"> 
                                    <mat-label i18n="@@CMMContactsMobileFormControl">Received By</mat-label>
                                    <input type="text" formControlName="siIssueRecievedBy" matInput>
                                    <mat-error i18n="@@CMMContactsMobileFormControlError">Verified By<strong>required</strong></mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-4">
                                <mat-form-field class="full-width"> 
                                    <mat-label i18n="@@CMMContactsMobileFormControl">Approved By</mat-label>
                                    <input type="text" formControlName="siIssueApprovedBy" matInput>
                                    <mat-error i18n="@@CMMContactsMobileFormControlError">Approved By <strong>required</strong></mat-error>
                                </mat-form-field>
                            </div>
                        </div>
                    </form>
                </div>
            </mat-card-content>
        </mat-card>
        
    </div>
</div>